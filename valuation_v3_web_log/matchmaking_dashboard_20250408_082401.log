2025-04-08 08:24:01,860 - INFO - [MainThread] - <module> - --- Application Start ---
2025-04-08 08:24:01,860 - INFO - [MainThread] - <module> - Checking database existence...
2025-04-08 08:24:01,860 - INFO - [MainThread] - <module> - Database files found.
2025-04-08 08:24:01,860 - INFO - [MainThread] - start_background_load - Starting background data loading thread...
2025-04-08 08:24:01,861 - INFO - [DataLoaderThread] - load_data_and_build_index - Initiating data load and FAISS index build...
2025-04-08 08:24:01,861 - INFO - [DataLoaderThread] - load_data_and_build_index - Loading embeddings from: databases_v3\embeddings_perfis_v3.db
2025-04-08 08:24:01,862 - INFO - [DataLoaderThread] - carregar_embeddings_e_ids_internal - Connecting to embedding DB: databases_v3\embeddings_perfis_v3.db
2025-04-08 08:24:01,935 - INFO - [MainThread] - log_info - Serving on http://127.0.0.1:8881
2025-04-08 08:24:01,943 - INFO - [DataLoaderThread] - carregar_embeddings_e_ids_internal - Processing 20000 rows from embeddings table...
2025-04-08 08:24:01,943 - INFO - [DataLoaderThread] - carregar_embeddings_e_ids_internal - Detected embedding dimension: 64. Expected blob size: 256 bytes.
2025-04-08 08:24:01,985 - INFO - [DataLoaderThread] - carregar_embeddings_e_ids_internal - Successfully created embedding matrix with shape: (20000, 64)
2025-04-08 08:24:01,989 - INFO - [DataLoaderThread] - load_data_and_build_index - Successfully loaded 20000 embeddings with dimension 64.
2025-04-08 08:24:01,989 - INFO - [DataLoaderThread] - load_data_and_build_index - Shape of embeddings matrix: (20000, 64)
2025-04-08 08:24:01,990 - INFO - [DataLoaderThread] - load_data_and_build_index - Checking consistency with profiles DB: databases_v3\perfis_jogadores_v3.db
2025-04-08 08:24:02,025 - INFO - [DataLoaderThread] - load_data_and_build_index - Found 20000 profiles in the profiles database.
2025-04-08 08:24:02,029 - INFO - [DataLoaderThread] - load_data_and_build_index - Building FAISS index...
2025-04-08 08:24:02,044 - INFO - [DataLoaderThread] - load_data_and_build_index - Embeddings normalized (L2) for FAISS index.
2025-04-08 08:24:02,044 - INFO - [DataLoaderThread] - construir_indice_faiss_internal - Initializing FAISS IndexFlatIP with dimension 64
2025-04-08 08:24:02,045 - INFO - [DataLoaderThread] - construir_indice_faiss_internal - Adding 20000 normalized vectors to the FAISS index...
2025-04-08 08:24:02,047 - INFO - [DataLoaderThread] - construir_indice_faiss_internal - Vectors added successfully.
2025-04-08 08:24:02,048 - INFO - [DataLoaderThread] - load_data_and_build_index - FAISS index built successfully. Index type: IndexFlatIP, Is trained: True, Total vectors: 20000
2025-04-08 08:24:02,049 - INFO - [DataLoaderThread] - load_data_and_build_index - --- Data loading and index build complete ---
2025-04-08 08:24:09,954 - INFO - [waitress-0] - index - Request received for index route.
2025-04-08 08:24:09,955 - INFO - [waitress-0] - index - Selected random origin profile ID: 7074
2025-04-08 08:24:09,955 - INFO - [waitress-0] - buscar_e_rankear_vizinhos - Starting match search for origin ID: 7074
2025-04-08 08:24:09,956 - INFO - [waitress-0] - buscar_e_rankear_vizinhos - Performing FAISS search with k=251 for ID 7074
2025-04-08 08:24:09,967 - INFO - [waitress-0] - buscar_e_rankear_vizinhos - FAISS search returned 251 potential candidate indices. Distances[0]: [1.0000001 1.        1.        1.        1.       ]
2025-04-08 08:24:10,126 - INFO - [waitress-0] - buscar_e_rankear_vizinhos - Processed 250 unique candidates from FAISS results.
2025-04-08 08:24:10,126 - INFO - [waitress-0] - buscar_e_rankear_vizinhos - Found 87 candidates passing ALL thresholds before final sorting.
2025-04-08 08:24:10,127 - INFO - [waitress-0] - buscar_e_rankear_vizinhos - Selected Top 10 neighbors after final ranking.
2025-04-08 08:24:10,127 - INFO - [waitress-0] - index - Finished processing index request for ID 7074. Duration: 0.173s. Found 10 matches.
2025-04-08 08:24:12,811 - INFO - [waitress-2] - index - Request received for index route.
2025-04-08 08:24:12,812 - INFO - [waitress-2] - index - Selected random origin profile ID: 15873
2025-04-08 08:24:12,813 - INFO - [waitress-2] - buscar_e_rankear_vizinhos - Starting match search for origin ID: 15873
2025-04-08 08:24:12,814 - INFO - [waitress-2] - buscar_e_rankear_vizinhos - Performing FAISS search with k=251 for ID 15873
2025-04-08 08:24:12,815 - INFO - [waitress-2] - buscar_e_rankear_vizinhos - FAISS search returned 251 potential candidate indices. Distances[0]: [1.0000001  0.904592   0.90459186 0.8854826  0.885389  ]
2025-04-08 08:24:12,969 - INFO - [waitress-2] - buscar_e_rankear_vizinhos - Processed 250 unique candidates from FAISS results.
2025-04-08 08:24:12,969 - INFO - [waitress-2] - buscar_e_rankear_vizinhos - Found 59 candidates passing ALL thresholds before final sorting.
2025-04-08 08:24:12,969 - INFO - [waitress-2] - buscar_e_rankear_vizinhos - Selected Top 10 neighbors after final ranking.
2025-04-08 08:24:12,969 - INFO - [waitress-2] - index - Finished processing index request for ID 15873. Duration: 0.158s. Found 10 matches.
